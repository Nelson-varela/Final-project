(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{47:function(e,t,a){e.exports=a(95)},57:function(e,t,a){},77:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),c=a.n(l),o=a(1),s=a(19),i=a(46),u=a(16),m=a(4),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(m.a)({},null===t||void 0===t?void 0:t.data))),Object(m.a)(Object(m.a)({},e),{},{authData:t.data,logged:!0,loading:!1,errors:null});case"LOGOUT":return localStorage.clear(),Object(m.a)(Object(m.a)({},e),{},{logged:!1,loading:!1,errors:null});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_SESSIONS":case"FETCH_SESSIONS_BY_USER":return Object(u.a)(t.payload);default:return e}},v=Object(s.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"LIKE":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));case"CREATE":return[].concat(Object(u.a)(e),[t.payload]);case"COMMENT":case"UPDATE":return e.map((function(e){return e._id===t.payload._id?t.payload:e}));case"DELETE":return e.filter((function(e){return e._id!==t.payload}));default:return e}},auth:p,novelties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_N":return t.payload;case"CREATE_N":return[].concat(Object(u.a)(e),[t.payload]);default:return e}},sessions:d}),b=(a(57),a(8)),f=a(5),E=a(15),g=a(9),h=a(2),N=a.n(h),O=a(7),j=a(43),w=a.n(j).a.create({baseURL:"https://dronetop.herokuapp.com/api/"});w.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var x=function(e){return w.patch("/posts/".concat(e,"/likePost"))},y=function(e,t){return w.patch("/posts/".concat(e),t)},k=function(e){return w.delete("/posts/".concat(e))},C=function(e,t){return w.post("/posts/".concat(t,"/commentPost"),{value:e})},S=function(e){return w.post("/users/signin",e)},L=function(e){return w.post("/users/signup",e)},A=function(e){return w.get("/sessions/".concat(e))},T=function(e){var t=e.title,a=Object(n.useRef)(document.title);Object(n.useEffect)((function(){var e=a.current;return t&&(document.title="".concat(t," | DroneTop")),function(){return document.title=e}}))},I=(a(77),{email:"",password:""}),_=function(){var e=Object(n.useState)(Object(m.a)({},I)),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(o.b)(),s=Object(f.g)();T({title:"Log-In"});var i=function(e){var t=e.target;l((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(E.a)({},t.name,t.value))}))};return r.a.createElement("div",{className:"bg-light"},r.a.createElement("div",{className:"row g-0"},r.a.createElement("div",{className:"col-lg-7 d-none d-lg-block img-drone"}),r.a.createElement("div",{className:"col-lg-5 bg-dark d-flex flex-column align-items-end min-vh-100"},r.a.createElement("div",{className:"px-lg-5 pt-lg-4 pb-lg-3 p-4 mb-auto w-100"},r.a.createElement("div",{className:"mb-3 position-relative"},r.a.createElement("img",{src:"https://raw.githubusercontent.com/Bragovar/Loguin/main/img-1.jpg",alt:"",style:{maxWidth:"150px"},className:"img-fluid"})),r.a.createElement("div",{className:"align-self-center w-100 px-lg-5 py-lg-4 p-4"},r.a.createElement("h1",{className:"font-weight-bold mb-4 text-warning"},"TrackMe: Descubre lo nuevo"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n){var r,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S(e);case 3:r=a.sent,l=r.data,n({type:"AUTH",data:l}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,s))},className:"mb-5"},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"form-label font-weight-bold text-warning"},"Email"),r.a.createElement("input",{className:"form-control bg-dark-x border-0",name:"email",type:"email",placeholder:"Escriba su password",autoComplete:"off",onChange:i})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"form-label font-weight-bold text-warning"},"Contrase\xf1a"),r.a.createElement("input",{className:"form-control bg-dark-x border-0 mb-2",name:"password",type:"password",placeholder:"Escriba su password",autoComplete:"off",onChange:i})),r.a.createElement("button",{type:"submit",className:"btn btn-warning w-100"},"Iniciar sesi\xf3n"))),r.a.createElement("div",{className:"text-center px-lg-5 pt-lg-3 pb-lg-4 p-4 mt-auto w-100"},r.a.createElement("p",{className:"d-inline-block mb-0 text-warning"},"\xbfTodavia no tienes una cuenta?"),r.a.createElement("p",{className:"text-light font-weight-bold "},"Acercate a tu supervisor"))))))},D=a(6),F=a.n(D),H=(a(83),a(84),{firstName:"",lastName:"",email:"",roll:"",password:"",confirmPassword:""}),R=function(){var e=Object(n.useState)({initialState:H}),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(o.b)(),s=Object(f.g)(),i=function(e){var t=e.target;l(Object(m.a)(Object(m.a)({},a),{},Object(E.a)({},t.name,t.value)))};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Registra un nuevo usuario"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement("form",{onSubmit:function(e){var t,n;e.preventDefault(),c((t=a,n=s,function(){var e=Object(O.a)(N.a.mark((function e(a){var r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:r=e.sent,l=r.data,a({type:"AUTH",data:l}),n.push("/login"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("label",{className:"form-label h6"},"Nombre"),r.a.createElement("input",{name:"firstName",type:"text",placeholder:"Nombre",className:"form-control mb-3",autoComplete:"off",onChange:i}),r.a.createElement("label",{className:"form-label h6"},"Apellido"),r.a.createElement("input",{name:"lastName",type:"text",placeholder:"Apellido",className:"form-control mb-3",autoComplete:"off",onChange:i}),r.a.createElement("label",{className:"form-label h6"},"Elija el Roll dentro de la compa\xf1\xeda"),r.a.createElement("select",{name:"roll",className:"form-control  mb-3",autoComplete:"off",onChange:i},r.a.createElement("option",{defaultValue:!0},"Seleccione un roll"),r.a.createElement("option",null,"Administrador"),r.a.createElement("option",null,"Operaciones")),r.a.createElement("label",{className:"form-label h6"},"Email"),r.a.createElement("input",{name:"email",type:"email",placeholder:"Email Usuario",className:"form-control  mb-3",autoComplete:"off",onChange:i}),r.a.createElement("label",{className:"form-label h6"},"Asigne un Password"),r.a.createElement("input",{name:"password",type:"password",placeholder:"Password",className:"form-control mb-3",autoComplete:"off",onChange:i}),r.a.createElement("label",{className:"form-label h6"},"Confirme el password"),r.a.createElement("input",{name:"confirmPassword",type:"password",placeholder:"confirme password",className:"form-control mb-3",autoComplete:"off",onChange:i}),r.a.createElement("button",{type:"submit",className:"btn mt-3 btn-outline-warning"},"Registrar")))))},U=a(27),J=a.n(U),M=function(e){var t=e.currentId,a=Object(n.useState)({title:"",message:"",selectedfile:""}),l=Object(g.a)(a,2),c=l[0],s=l[1],i=Object(o.c)((function(e){return t?e.novelties.find((function(e){return e._id===t})):null})),u=Object(o.b)(),p=JSON.parse(localStorage.getItem("profile"));Object(n.useEffect)((function(){i&&s(i)}),[i]);var d=c.message,v=c.title,b=c.selectedFile,f=function(e){var t=e.target;s(Object(m.a)(Object(m.a)({},c),{},Object(E.a)({},t.name,t.value)))};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Notifica una Novedad"),r.a.createElement("hr",null)),r.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),u(function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l=e,w.post("/novelties",l);case 3:n=t.sent,r=n.data,a({type:"CREATE_N",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var l}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(m.a)(Object(m.a)({},c),{},{name:null===p||void 0===p||null===(t=p.result)||void 0===t?void 0:t.name}))),s({title:"",message:"",selectedFile:""})}},r.a.createElement("label",{className:"form-label h6"},"Asunto"),r.a.createElement("input",{name:"title",type:"text",placeholder:"Asunto",className:"form-control mb-3",autoComplete:"off",value:v,onChange:f}),r.a.createElement("label",{className:"form-label h6"},"Descripci\xf3n"),r.a.createElement("input",{name:"message",type:"text-area",placeholder:"Describa la novedad brevemente",className:"form-control  mb-3",autoComplete:"off",value:d,onChange:f}),r.a.createElement("label",{className:"form-label h6"},"Adjunta un documento soporte si aplica"),r.a.createElement("div",{className:"mb-2"},r.a.createElement(J.a,{type:"file",multiple:!0,value:b,onChange:f})),r.a.createElement("button",{type:"submit",className:"btn mt-3 btn-warning"},"Enviar Novedad")))},P=function(e){var t=e.novelty;F.a.locale("es");var a=JSON.parse(localStorage.getItem("profile"));return r.a.createElement("div",null,"Administrador"===(null===a||void 0===a?void 0:a.result.roll)&&r.a.createElement("div",{className:"card card-header mb-2",style:{width:""}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.title),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},F()(t.createdAt).fromNow()," por: ",t.name),r.a.createElement("p",{className:"card-text"},t.message),r.a.createElement("p",{className:"card-link"},t.selectedFile))))},B=function(){var e=Object(o.c)((function(e){return e.novelties}));return r.a.createElement("div",null,e.reverse().map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(P,{novelty:e}))})))},z=function(){var e=Object(n.useState)(0),t=Object(g.a)(e,2),a=t[0],l=(t[1],Object(o.b)());return T({title:"Novedades"}),Object(n.useEffect)((function(){l(function(){var e=Object(O.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/novelties");case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL_N",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[a,l]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement(M,{currentId:a})),r.a.createElement("div",{className:"col-7"},r.a.createElement(B,null)))},V=function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n){var r,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C(e,t);case 3:return r=a.sent,l=r.data,n({type:"COMMENT",payload:l}),a.abrupt("return",l.comments);case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},q=function(e){var t=e.currentId,a=e.setCurrentId,l=Object(n.useState)({title:"",message:"",selectedFile:"",tags:""}),c=Object(g.a)(l,2),s=c[0],i=c[1],u=s.message,p=s.title,d=s.selectedFile,v=s.tags,b=Object(o.c)((function(e){return t?e.posts.find((function(e){return e._id===t})):null})),f=Object(o.b)(),h=JSON.parse(localStorage.getItem("profile"));Object(n.useEffect)((function(){b&&i(b)}),[b]);var j=function(e){var t=e.target;i(Object(m.a)(Object(m.a)({},s),{},Object(E.a)({},t.name,t.value)))},x=function(){a(0),i({title:"",message:"",tags:"",selectedFile:""})};return r.a.createElement("div",{className:""},r.a.createElement("div",null,"Administrador"===(null===h||void 0===h?void 0:h.result.roll)&&r.a.createElement("h5",null,"Crea un comunicado:")),r.a.createElement("div",{className:"row"},"Administrador"===(null===h||void 0===h?void 0:h.result.roll)&&r.a.createElement("form",{onSubmit:function(e){var a,n;(e.preventDefault(),0===t)?(f(function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l=e,w.post("/posts",l);case 3:n=t.sent,r=n.data,a({type:"CREATE",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var l}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(m.a)(Object(m.a)({},s),{},{name:null===h||void 0===h||null===(a=h.result)||void 0===a?void 0:a.name}))),x()):(f(function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n){var r,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y(e,t);case 3:r=a.sent,l=r.data,n({type:"UPDATE",payload:l}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,Object(m.a)(Object(m.a)({},s),{},{name:null===h||void 0===h||null===(n=h.result)||void 0===n?void 0:n.name}))),x())}},r.a.createElement("label",{className:"form-label h6"},t?'Editing "'.concat(p,'"'):"Escribe un asunto"),r.a.createElement("input",{name:"title",type:"text",placeholder:"Asunto",className:"form-control mb-2",autoComplete:"off",value:p,onChange:j}),r.a.createElement("label",{className:"form-label h6"},"Descripci\xf3n"),r.a.createElement("textarea",{name:"message",type:"text-area",placeholder:"Describa el comunicado",className:"form-control  mb-2",autoComplete:"off",value:u,onChange:j}),r.a.createElement("label",{className:" h6"},"Sube una imagen o archivo"),r.a.createElement("div",{className:"mb-2 "},r.a.createElement(J.a,{className:"mx-3",type:"file",multiple:!1,onDone:function(e){var t=e.base64;return i(Object(m.a)(Object(m.a)({},s),{},{selectedFile:t}))},value:d})),r.a.createElement("label",{className:"form-label h6"},"Etiquetas"),r.a.createElement("input",{name:"tags",type:"text",placeholder:"Etiquetas o Tags",className:"form-control mb-3",autoComplete:"off",value:v,onChange:j}),r.a.createElement("button",{type:"submit",className:"btn mt-2 mb-2 btn-warning"},"Enviar comunicado"))))},G=a(22),K=function(e){var t=e.post,a=JSON.parse(localStorage.getItem("profile")),l=Object(n.useState)(""),c=Object(g.a)(l,2),s=c[0],i=c[1],u=Object(o.b)(),m=Object(n.useRef)(),p=Object(n.useState)(null===t||void 0===t?void 0:t.comments),d=Object(g.a)(p,2),v=d[0],b=d[1],f=function(){var e=Object(O.a)(N.a.mark((function e(n){var r,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,u(V("".concat(null===a||void 0===a||null===(r=a.result)||void 0===r?void 0:r.name,": ").concat(s),t._id));case 3:l=e.sent,i(""),b(l),""===s&&i(null),m.current.scrollIntoView({behavior:"smooth"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"text-center"},"Comentarios"),r.a.createElement("hr",null),null===v||void 0===v?void 0:v.map((function(e,t){return r.a.createElement("h5",{key:t},r.a.createElement("strong",{className:"text-warning"},e.split(": ")[0]),e.split(":")[1])})),r.a.createElement("div",{ref:m}),r.a.createElement("form",null,r.a.createElement("input",{name:"comment",type:"text",className:"form-control mb-2",placeholder:"Escribe tu comentario",onChange:function(e){return i(e.target.value)}}),r.a.createElement("button",{className:"btn btn-warning",onClick:f},"Comentar"))))},W=function(e){var t,a=e.post;F.a.locale("es");var n=Object(o.b)(),l=JSON.parse(localStorage.getItem("profile")),c=function(){return a.likes.length>0?a.likes.find((function(e){var t;return e===(null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t._id)}))?r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{size:16}),"\xa0",a.likes.length>2?"T\xfa y ".concat(a.likes.length-1," m\xe1s"):"".concat(a.likes.length," like").concat(a.likes.length>1?"s":"")):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{size:16}),"\xa0",a.likes.length," ",1===a.likes.length?"Like":"Likes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{size:16}),"\xa0Like")};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:" position-relative"},r.a.createElement("div",{className:"card card-header mb-3",style:{maxWidth:"550px"}},r.a.createElement("h6",{className:"mx-2 mt-2 text-muted"},F()(a.createdAt).fromNow()," por: ",r.a.createElement("strong",{className:"text-warning"},a.name)," "),r.a.createElement("h5",{className:"mx-2 mt-2"},a.title),r.a.createElement("img",{src:a.selectedFile,className:"card-img",alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text fst-italic"},a.message),r.a.createElement("p",null,a.tags.map((function(e){return"#".concat(e," ")}))),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"col-3 pe-auto btn-sm btn-warning",disabled:!(null===l||void 0===l?void 0:l.result),onClick:function(){return n((e=a._id,function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r,l;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("profile")),t.prev=1,t.next=4,x(e,null===n||void 0===n||n.token);case 4:r=t.sent,l=r.data,a({type:"LIKE",payload:l}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(c,null)),(null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t._id)===(null===a||void 0===a?void 0:a.creator)&&r.a.createElement("p",{className:"col-1 position-absolute top-0 end-0 btn btn-outline-danger m-2",onClick:function(){return n((e=a._id,function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e);case 3:return t.next=5,t.sent;case 5:a({type:"DELETE",payload:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(G.b,{className:"pe-auto",size:16})," "),r.a.createElement("p",{className:"col-3 position-absolute bottom-0 end-0"},a.comments.length," Comentarios")))))),r.a.createElement("div",{className:"col-5"},r.a.createElement(K,{post:a})))},X=function(e){var t=e.setCurrentId,a=Object(o.c)((function(e){return e.posts}));return r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{className:"flex-column-reverse",key:e._id},r.a.createElement(W,{post:e,setCurrentId:t}))})))},Y=function(){var e=Object(n.useState)(0),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(o.b)();return T({title:"Home"}),Object(n.useEffect)((function(){c(function(){var e=Object(O.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/posts");case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[a,c]),r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",{className:"sticky-top"},"Zona de Comunicados DroneTop"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(q,{currentId:a,setCurrentId:l})),r.a.createElement("div",{className:"col-9"},r.a.createElement(X,{setCurrentId:l}))))},Z=function(){var e=Object(o.c)((function(e){return e.sessions})),t=Object(o.b)(),a=Object(f.g)();T({title:"Reporte de Logueo"}),F.a.locale("es"),Object(n.useEffect)((function(){t(function(){var e=Object(O.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/sessions");case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL_SESSIONS",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Reporte de Logueo"),r.a.createElement("hr",null),e.reverse().map((function(e,t){return r.a.createElement("div",{key:"session-".concat(t)},r.a.createElement("p",null,r.a.createElement("span",null,"ID del Usuario: "),r.a.createElement("span",null,e.userId)),r.a.createElement("p",null,r.a.createElement("span",null,"Nombre del Usuario: "),r.a.createElement("span",null,e.name)),r.a.createElement("p",null,r.a.createElement("span",null,"Hora de Loggin: "),r.a.createElement("span",null," ",F()(e.loginDate).format("LLL"))),r.a.createElement("p",null,r.a.createElement("span",null,"Hora de Logout: "),r.a.createElement("span",null,F()(e.logoutDate).format("LLL"))),r.a.createElement("button",{className:"btn btn-warning",onClick:function(){return t=e.userId,void a.push("/report/".concat(t));var t}},"Ver todos los logs por usuario: ",e.name),r.a.createElement("hr",null))})))},Q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.sessions})),a=Object(f.i)().userId;T({title:"Reporte por usuario"}),F.a.locale("es"),Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:n=t.sent,r=n.data,a({type:"FETCH_SESSIONS_BY_USER",payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(a))}),[]);return r.a.createElement("div",null,t.reverse().map((function(e,t){return r.a.createElement("div",{key:"session-".concat(t,"-by-").concat(a)},r.a.createElement("h3",null,"Logueo de ",e.name," del ",F()(e.loginDate).format("LL")),r.a.createElement("hr",null),r.a.createElement("p",null,"Hora de Loggin: ",F()(e.loginDate).format("LT")),r.a.createElement("p",null,"Hora de Logout: ",F()(e.logoutDate).format("LT")),r.a.createElement("p",null,"Tiempo trabajado: ",function(e,t){var a=new Date(e),n=new Date(t);return Math.floor((n.getTime()-a.getTime())/1e3/60)}(e.loginDate,e.logoutDate)," Minutos"),r.a.createElement("hr",null))})))},$=a(45),ee=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),t=Object(g.a)(e,2),a=t[0],l=t[1],c=Object(o.b)(),s=Object(f.h)(),i=Object(f.g)(),u=function(){var e;l(null),c((e=i,function(){var t=Object(O.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.post("/users/signout");case 3:e.push("/login"),a({type:"LOGOUT"}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),a({type:"LOGOUT"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))};return Object(n.useEffect)((function(){var e=null===a||void 0===a?void 0:a.token;e&&(1e3*Object($.a)(e).exp<(new Date).getTime()&&u());l(JSON.parse(localStorage.getItem("profile")))}),[s]),r.a.createElement("nav",{className:"navbar navbar-expand fixed-top navbar-dark bg-dark"},r.a.createElement(b.b,{className:"mx-3 text-bold text-warning navbar-brand",to:"/"},r.a.createElement("strong",null,"DroneTop")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"navbar-collapse"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(b.b,{activeClassName:"active",className:"nav-item nav-link",exact:!0,to:"/novedades"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-warning btn-sm"},"Novedades")),"Administrador"===(null===a||void 0===a?void 0:a.result.roll)&&r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(b.b,{activeClassName:"active",className:"nav-link dropdown-toggle text-warning",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",exact:!0,to:"/dc"},"Manejo de Usuarios"),r.a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},r.a.createElement("li",null,r.a.createElement(b.b,{to:"/reportelog",className:"dropdown-item"},"Reporte de Logueo")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/usuario/crear",className:"dropdown-item"},"Crear un Usuario")))))),r.a.createElement("div",{className:"order-3 pr-3 "},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("h6",{className:"nav-item nav-link text-warning"},"Hola, ",null===a||void 0===a?void 0:a.result.name),r.a.createElement("h6",{className:"nav-item nav-link text-white"}," ",null===a||void 0===a?void 0:a.result.roll),r.a.createElement("button",{className:"mx-3 btn btn-warning btn-sm",onClick:u},"Logout"))))},te=a(18),ae=["isAuthenticated","component"],ne=function(e){var t=e.isAuthenticated,a=e.component,n=Object(te.a)(e,ae),l=JSON.parse(localStorage.getItem("profile"));return r.a.createElement(f.b,Object.assign({},n,{component:function(e){return t&&"Administrador"===l.result.roll?r.a.createElement(a,e):r.a.createElement(b.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/report/:userId",component:Q}),r.a.createElement(f.b,{exact:!0,path:"/reportelog",component:Z}),r.a.createElement(f.b,{exact:!0,path:"/usuario/crear",component:R})))}}))},re=function(){var e=F()().format("LL"),t=F()().format("dddd");F.a.locale("es");var a=Object(o.c)((function(e){return e.auth}));return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,null),r.a.createElement("div",{className:"container text-secondary"},r.a.createElement("hr",null),r.a.createElement("p",null,"Bienvenidos, ",t," ",e)),r.a.createElement("div",{className:"container-sm mt-2"},r.a.createElement(b.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",component:Y}),r.a.createElement(ne,{exact:!0,path:"/usuario/crear",component:R,isAuthenticated:a.logged}),r.a.createElement(f.b,{exact:!0,path:"/novedades",component:z}),r.a.createElement(ne,{exact:!0,path:"/report/:userId",component:Q,isAuthenticated:a.logged}),r.a.createElement(ne,{exact:!0,path:"/reportelog",component:Z,isAuthenticated:a.logged})))))},le=["isAuthenticated","component"],ce=function(e){var t=e.isAuthenticated,a=e.component,n=Object(te.a)(e,le);return r.a.createElement(f.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(a,e):r.a.createElement(f.a,{to:"/login"})}}))},oe=["isAuthenticated","component"],se=function(e){var t=e.isAuthenticated,a=e.component,n=Object(te.a)(e,oe);return r.a.createElement(f.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(f.a,{to:"/"}):r.a.createElement(a,e)}}))},ie=function(){var e=JSON.parse(localStorage.getItem("profile")),t=Object(o.c)((function(e){return e.auth}));return r.a.createElement(b.a,null,r.a.createElement("div",null,r.a.createElement(f.d,null,r.a.createElement(se,{exact:!0,path:"/login",component:_,isAuthenticated:t.logged}),r.a.createElement(ce,{path:"/",component:re,isAuthenticated:null===e||void 0===e?void 0:e.token}))))},ue=function(){return r.a.createElement(ie,null)},me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c,pe=Object(s.d)(v,me(Object(s.a)(i.a)));c.a.render(r.a.createElement(o.a,{store:pe},r.a.createElement(ue,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.c76956b3.chunk.js.map